<div align="center">

# MSMTP (Сервис для отправки почты)

</div>

Почтовый сервис msmtp служит по факту для отправки почты через командную строку

Шаблон для отправки почты с конфигурацией .msmtprc:

```echo ""test" | /usr/bin/msmtp -C /var/www/.msmtprc -a default test@test.test -t -i```

<details>
  <summary>Разбор команды</summary>

1. <code>echo "test"</code>: Эта часть команды использует команду echo для вывода строки "test" в стандартный вывод. (в нашем случае письмо формируется кодом) Конвейер | перенаправляет этот вывод в следующую часть команды.
1. <code>/usr/bin/msmtp</code>: Путь к исполняемому файлу msmtp
1. <code>-C /var/www/.msmtprc</code>:  Флаг указывает msmtp на файл конфигурации, который содержит настройки для отправки электронной почты
1. <code>-a default</code>: Этот флаг указывает msmtp какой аккаунт отправки электронной почты использовать
1. <code>test@test.test</code>: Это адрес электронной почты получателя
1. <code>-t</code>:  Флаг говорит msmtp интерпретировать письмо, которое будет отправлено, как текстовое сообщение. Это означает, что msmtp не будет ожидать ввода дополнительной информации, такой как заголовки письма.
1. <code>-i</code>: Флаг говорит msmtp игнорировать пробелы в начале строчек текста и не интерпретировать их как инструкции для изменения поведения отправки.

</details>

<details>
  <summary>Примерная конфигурация .msmtprc</summary>

```
account www-data
host ip_mailserver
port 1025
keepbcc on
tls on
tls_certcheck off

auth on
user user_mailserver
password secret_from_user_mailserver

from mail@domain.ru
logfile /path/to/msmtp.log
maildomain domain.ru
```

</details>

> [!NOTE]
> Для отправки почты файл .msmtprc может содержать конф. информацию, к чему msmtp чувствителен. Для выполнения команды отправки письма необходимо быть владельцем файла .msmtprc и доступ к файлу должен быть ограничен chmod 600

После настройки можно бежать в контейнер docker и прямо из контейнера попытаться отправить письмо шаблоном указанным выше.
