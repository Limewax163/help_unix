### MSMTP

## Почтовый сервис

сервис msmtp по факту отправка почты через командную строку

Шаблон для отправки почты с конфигурацией .msmtprc:

```echo ""test" | /usr/bin/msmtp -C /var/www/.msmtprc -a default test@test.test -t -i```

1. echo "test": Эта часть команды использует команду echo для вывода строки "test" в стандартный вывод. (в нашем случае письмо формируется кодом) Конвейер | перенаправляет этот вывод в следующую часть команды.
1. /usr/bin/msmtp: Путь к исполняемому файлу msmtp
1. -C /var/www/.msmtprc:  Флаг указывает msmtp на файл конфигурации, который содержит настройки для отправки электронной почты
1. -a default: Этот флаг указывает msmtp какой аккаунт отправки электронной почты использовать
1. test@test.test: Это адрес электронной почты получателя
1. -t:  Флаг говорит msmtp интерпретировать письмо, которое будет отправлено, как текстовое сообщение. Это означает, что msmtp не будет ожидать ввода дополнительной информации, такой как заголовки письма.
1. -i: Флаг говорит msmtp игнорировать пробелы в начале строчек текста и не интерпретировать их как инструкции для изменения поведения отправки.

Примерная конфигурация .msmtprc

```
account www-data
host ip_mailserver
port 1025
keepbcc on
tls on
tls_certcheck off

auth on
user user_mailserver
password secret_from_user_mailserver

from mail@domain.ru
logfile /path/to/msmtp.log
maildomain domain.ru
```

> [!NOTE]Для отправки почты файл .msmtprc может содержать конф. информацию, к чему msmtp чувствителен. Для выполнения команды отправки письма необходимо быть владельцем файла .msmtprc и доступ к файлу должен быть ограничен chmod 600

После настройки можно бежать в контейнер docker и прямо из контейнера попытаться отправить письмо шаблоном указанным выше.
