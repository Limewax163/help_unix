<div align="center">

# UFW (Uncomplicated Firewall или «простой брандмауэр»)

</div>
  
`ufw enable` - Включить встроенный фаервол Ubuntu

>[!NOTE]
>Перед включением фаервола на удаленном хосте убедиться что порт SSH будет открыт, иначе после включения UFW при отсутствии соответствующих правил доступа на сервер по 22/TCP порту подключение будет прервано и будет недоступно

`ufw show added` - Показывает какие правила были добавлены на данный момент, даже если фаервол выключен

`ufw <allow/deny> <port>/<protocol>` - <Разрешает/Запрещает> на фаерволе доступ к хосту по порту <port> и портоколу tcp или udp <protocol>

`ufw <allow/deny> from <ip> to any port <port>` - <Разрешает/Запрещает> на фаерволе доступ к хосту от определенного ip на определенный порт <port>

`ufw <allow/deny> from <ip> to any app <application_name>` - <Разрешает/Запрещает> на фаерволе доступ к хосту от определенного ip на порты приложения `app` которые определены в конфигурациях фаервола

>[!NOTE]
>Конфигурации приложений `<app>` располагаются в /etc/ufw/application.d/<app_name>
>В конфигурации задается название профиля приложения (которое будет указано в команде выше `<app>`. И правила устанавливаемые данным профилем.

<details>
  <summary>Конструкция конфигов app для ufw</summary>

```
/etc/ufw/application.d/<app_name>
---
[<название_профиля>]
title=<заголовок>
description=<краткое описание>
ports=<список, портов, разделенных, запятыми, и, пробелом>/<протокол>
```
</details>

>[!NOTE]
>Если в названии профиля будут пробелы, для указания правила для фаервола имя приложение нужно будет обособлять 'кавычками'

`ufw app list` - Показывает все существующие приложения в конфигурациях фаервола

`ufw <allow/deny> on <adapter_name> to any <app/port> <application_name/port` - <Разрешает/Запрещает> на определенном <сетевом_адаптере> доступ к определенному <приложению/порту>

`ufw deny out <port>` - Запрещает доступ на исходящий трафик по порту `<port>`

`ufw status <verbose/numbered>` - Показывает текущий статус фаервола <подробный/пронумерованый> (Пронумерованую информацию удобно смотреть если нужно удалять правила по его номеру)

>[!NOTE]
>После каждого удаления лучше дополнительно повторять команду, т.к. фаервол может переназначить сопоставления номер:правило после значительных изменений

`ufw delete <rules_number>` - Удаление определенного правила по его номеру, определенному командой `ufw status numbered`

>[!NOTE]
>В UFW есть определенный набор правил по умолчанию, которые будут работать, если не установленны обратные правила для определенных сущностей
>
>Правила по умолчанию хранятся в конфигурационном файле /etc/default/ufw

`ufw default <allow/deny> <outgoing/incoming>` - <Разрешает/Запрещает> на фаерволе <Исходящую/Входящую> политику правил
